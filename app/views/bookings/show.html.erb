<%  @page_title = "Table Page" %>

<div>
  <div class="restaurant-header">
    <h1><%= @restaurant.name %></h1>
    <p><%= @restaurant.address %></p>
  </div>

<!-- TODO: Formatting to be updated given changes done by Spencer in other branch -->
  <div class="card-box-shadow" style="text-align: center; margin: 16px auto; padding: 16px;">
    <p><%= @booking.date %></p>
  </div>

</div>

<div class="card-medium card-box-shadow ">
  <h3> Add Attendee</h3>
</div>

<div class="card-medium card-box-shadow">
  <%= link_to restaurant_booking_attendees_path(@restaurant, @booking) do %>
    <h3>View Attendees</h3>
  <% end %>
</div>

<%= link_to restaurant_path(@restaurant) do %>
  <div class="card-medium card-box-shadow">
    <h3>Make your selection</h3>
  </div>
<% end %>
<%= link_to  restaurant_booking_attendee_order_path(@restaurant, @booking, @attendee_user) do %>
  <div class="card-medium card-box-shadow">
    <h3>Your order</h3>
  </div>
<% end %>

<%= link_to restaurant_booking_summary_path(@restaurant, @booking, @attendees) do %>
  <div class="card-medium card-box-shadow">
    <h3>Table order</h3>
  </div>
<% end %>




<h3>Add Attendees</h3>

<div>
  <%= simple_form_for :search, url: restaurant_booking_path, method: "GET", html: { class: 'form-inline' } do |f| %>
    <%= f.input :name, input_html: {value: ""} %>
    <%= f.submit "Search", class: "btn btn-primary" %>
  <% end %>
</div>


<%# if a user searches to add a guest to the table  %>
<% if @user && @user != current_user %>

  <div class="card-small card-box-shadow user">
    <%= cl_image_tag(@user.photo, :transformation=>[
      {:gravity=>"face", :radius=>"max"},
      {:width=>35, :crop=>"thumb"}
      ])
    %>
    <div>
      <p><%= @user.first_name %> <%= @user.last_name %></p>
    </div>

    <%= simple_form_for [@booking.restaurant, @booking, @attendee] do |f| %>
      <%= f.input :user_id , as: :hidden, input_html: { value: @user.id } %>
      <%= f.submit "Invite Now", class: "btn btn-dark" %>
    <% end %>

  </div>

<% end %>


